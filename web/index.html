<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>RoomSpeak</title>

    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>

<body x-data="app()" x-init="init()">

<div x-show="!pc" class="connect_form">
    <div>
        <label>
            <input
                    type="text"
                    placeholder="Your name"
                    x-model="name"
            >
        </label>

        <label>
            <input
                    type="text"
                    placeholder="Enter 4-symbol code"
                    x-model="roomCode"
                    @input="roomCode = $event.target.value.toUpperCase(); $event.target.value = roomCode"
                    maxlength="4"
            >
        </label>

        <!-- Выбор устройства ввода -->
        <label>
            Audio Input:
            <select x-model="selectedInputDevice" @change="updateAudioDevices()">
                <template x-for="device in audioInputDevices">
                    <option :value="device.deviceId" x-text="device.label || 'Default Microphone'"></option>
                </template>
            </select>
        </label>

        <!-- Выбор устройства вывода -->
        <label>
            Audio Output:
            <select x-model="selectedOutputDevice" @change="updateOutputDevice()">
                <template x-for="device in audioOutputDevices">
                    <option :value="device.deviceId" x-text="device.label || 'Default Speaker'"></option>
                </template>
            </select>
        </label>

        <button @click="connect()" :disabled="!isFormValid()" class="connect">Connect</button>
    </div>
</div>

<div class="room">
    <div x-show="pc">
        <h3>Participants</h3>
        <ul>
            <template x-for="participant in participants">
                <li x-text="participant"></li>
            </template>
        </ul>

        <button x-show="pc" @click="disconnect()" class="disconnect">Disconnect</button>
    </div>
</div>

<script src="script.js"></script>

</body>
</html>